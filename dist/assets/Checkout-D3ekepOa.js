import{L as Be,l as Fe,a as ze,x as Le,r as u,u as Me,q as Ae,c as n,b as e,F as I,s as A,d as _,O as je,w as qe,v as g,e as o,t as l,m,P as Re,j as Ce,o as d}from"./index-DzQTWAAa.js";const Oe={class:"checkout"},Qe={class:"container-fluid my-5"},Ee={class:"row"},Ye={class:"col-lg-7 col-12"},Ze={class:"checkout__shipping-add"},Ge=e("h3",null,"Shipping Address",-1),He={class:"d-flex flex-wrap created-address"},Je=["id","onInput","value"],Ke=["for"],We={class:"mb-2"},Xe={class:"mb-2"},et={class:"col-md-6 col-12 pe-2"},tt=e("div",{class:"d-flex flex-column align-items-center"},[e("i",{class:"bi bi-plus"}),Ce(" Add New Address ")],-1),st=[tt],lt={key:0,class:"checkout__shipping-add-wrapper"},ot={class:"checkout__shipping-add-wrapper-new"},at=e("h3",null,"New Address",-1),nt={class:"form-floating"},dt=e("label",{for:"floatingInput"},"Full Name",-1),rt={key:0,class:"text-danger"},it={class:"form-floating"},ct=e("label",{for:"floatingInput"},"Address",-1),ut={key:0,class:"text-danger"},_t={class:"form-floating"},pt=e("label",{for:"floatingInput"},"Email",-1),ht={key:0,class:"text-danger"},vt={class:"d-flex align-items-center gap-3 flex-wrap flex-md-nowrap"},ft=e("option",{value:"null",selected:"",disabled:""},"Add New City",-1),gt=["value"],mt={class:"form-floating"},yt=e("label",{for:"floatingInput"},"State",-1),bt={class:"form-floating"},kt=e("label",{for:"floatingInput"},"ZIP Code",-1),wt={key:0,class:"text-danger"},xt={class:"form-floating"},It=e("label",{for:"floatingInput"},"Phone Number",-1),At={key:0,class:"text-danger"},Ct={class:"d-flex align-items-center justify-content-end gap-3"},St=["disabled"],$t=e("div",{class:"spinner-border fs-3",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Dt=[$t],Pt={key:1,class:"d-flex align-items-center justify-content-end gap-3"},Nt=e("button",{class:"primary-button",type:"submit"},"Save",-1),Vt={class:"col-lg-5 col-12"},Tt={class:"row flex-column gap-3"},Ut={class:"col-12"},Bt={class:"checkout__product"},Ft={class:"checkout__product-items"},zt={class:"d-flex align-items-center"},Lt=["src"],Mt={class:"pe-2"},jt={class:"d-flex align-items-center justify-content-between w-50 ps-5"},qt={class:"pt-3 text-end fw-bold"},Rt={class:"text-info"},Ot={class:"col-12"},Qt={class:"checkout__payment"},Et=e("p",{class:"text-dark fw-semibold fs-3"},"Order Summary",-1),Yt=e("span",null,"Items Total",-1),Zt=e("span",null,"Delivery Fee",-1),Gt={class:"border-top border-2"},Ht=e("strong",null,"Total Payment",-1),Wt={__name:"Checkout",setup(Jt){const y=Be(),{loading:Se,error:i,sendRequest:w}=Fe(),$e=ze(),De=Le(),p=u({setDeliveryAddress:!1,setDesiveryCharge:0,addressId:null}),C=u(null);u(null);const Pe=r=>{var s;p.value.setDeliveryAddress=!0,p.value.setDesiveryCharge=(s=r.order_area)==null?void 0:s.delivery_charge,p.value.addressId=r.id},Ne=()=>{p.value.setDeliveryAddress?$e.push({name:"payment",query:{addressId:p.value.addressId}}):$toast.error("Please Select Your Delivery Address...")},h=u(!1);u(!1);const v=Me(),a=u({title:null,email:null,phone:null,address:null,area:null,state:null,zip_code:null}),Ve=async()=>{var s;await w({method:"post",data:{user_id:(s=v==null?void 0:v.user)==null?void 0:s.id,...a.value},url:"/api/save-new-address"})!==void 0&&(h.value=!1,$toast.success("Address Added"),await $())},Te=u(null),S=u(null),Ue=async()=>{var c;const r=await v.getToken(),s=await w({method:"get",url:"/api/address",headers:{Authorization:`Bearer ${r}`}});Te.value=(c=s==null?void 0:s.data)==null?void 0:c.addresses};Ae(async()=>{await Ue();const r=await w({method:"get",url:"/api/all-areas"});S.value=r==null?void 0:r.data});const $=async()=>{var c;const r=await v.getToken(),s=await w({method:"get",url:"/api/address",headers:{Authorization:`Bearer ${r}`}});C.value=(c=s==null?void 0:s.data)==null?void 0:c.addresses};return Ae(async()=>{await $(),De.query.invalidAddressId&&$toast.error("Please Select Your Shipping Details Before Payment.")}),(r,s)=>{var c,D,P,N,V,T,U,B,F,z,L,M,j,q,R,O,Q,E,Y,Z,G,H,J,K,W,X,ee,te,se,le,oe,ae,ne,de,re,ie,ce,ue,_e,pe,he,ve;return d(),n("section",Oe,[e("div",Qe,[e("div",Ee,[e("div",Ye,[e("div",Ze,[Ge,e("div",He,[(d(!0),n(I,null,A(C.value,(t,f)=>{var b,k;return d(),n("div",{class:"col-md-6 col-12 pe-2 mb-3",key:`add-${f}`},[e("input",{type:"radio",name:"address",id:`add-${f}`,onInput:x=>Pe(t),value:f,class:"address-radio address-radio--one"},null,40,Je),e("label",{for:`add-${f}`,role:"button",class:"w-100 h-100"},[e("h3",null,l(t==null?void 0:t.title),1),e("div",null,[e("p",We,l(t==null?void 0:t.address),1),e("p",null,l(t==null?void 0:t.email),1),e("p",Xe,l(t==null?void 0:t.phone),1),e("p",null,"Area: "+l((b=t==null?void 0:t.order_area)==null?void 0:b.area_name)+" & Delivery Charge: "+l((k=t==null?void 0:t.order_area)==null?void 0:k.delivery_charge)+" ৳",1)])],8,Ke)])}),128)),e("div",et,[_(e("button",{class:"add-new-add m-0",onClick:s[0]||(s[0]=t=>h.value=!0)},st,512),[[je,!h.value]])])]),h.value?(d(),n("div",lt,[e("div",ot,[at,e("form",{onSubmit:qe(Ve,["prevent"])},[e("div",nt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Full Name","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.title=t)},null,512),[[g,a.value.title]]),dt,(N=(P=(D=(c=o(i))==null?void 0:c.response)==null?void 0:D.data)==null?void 0:P.errors)!=null&&N.title?(d(),n("small",rt,l((B=(U=(T=(V=o(i))==null?void 0:V.response)==null?void 0:T.data)==null?void 0:U.errors)==null?void 0:B.title[0]),1)):m("",!0)]),e("div",it,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Address","onUpdate:modelValue":s[2]||(s[2]=t=>a.value.address=t)},null,512),[[g,a.value.address]]),ct,(M=(L=(z=(F=o(i))==null?void 0:F.response)==null?void 0:z.data)==null?void 0:L.errors)!=null&&M.address?(d(),n("small",ut,l((O=(R=(q=(j=o(i))==null?void 0:j.response)==null?void 0:q.data)==null?void 0:R.errors)==null?void 0:O.address[0]),1)):m("",!0)]),e("div",_t,[_(e("input",{type:"email",class:"form-control",id:"floatingInput",placeholder:"email","onUpdate:modelValue":s[3]||(s[3]=t=>a.value.email=t)},null,512),[[g,a.value.email]]),pt,(Z=(Y=(E=(Q=o(i))==null?void 0:Q.response)==null?void 0:E.data)==null?void 0:Y.errors)!=null&&Z.email?(d(),n("small",ht,l((K=(J=(H=(G=o(i))==null?void 0:G.response)==null?void 0:H.data)==null?void 0:J.errors)==null?void 0:K.email[0]),1)):m("",!0)]),e("div",vt,[_(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.area=t),class:"form-select","aria-label":"Default select example"},[ft,(d(!0),n(I,null,A(S.value,t=>(d(),n("option",{key:`single-i-${t.id}`,value:t.id},l(t==null?void 0:t.area_name),9,gt))),128))],512),[[Re,a.value.area]]),e("div",mt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"State","onUpdate:modelValue":s[5]||(s[5]=t=>a.value.state=t)},null,512),[[g,a.value.state]]),yt]),e("div",bt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"ZIP Code","onUpdate:modelValue":s[6]||(s[6]=t=>a.value.zip_code=t)},null,512),[[g,a.value.zip_code]]),kt])]),(te=(ee=(X=(W=o(i))==null?void 0:W.response)==null?void 0:X.data)==null?void 0:ee.errors)!=null&&te.area?(d(),n("small",wt,l((ae=(oe=(le=(se=o(i))==null?void 0:se.response)==null?void 0:le.data)==null?void 0:oe.errors)==null?void 0:ae.area[0]),1)):m("",!0),e("div",null,[e("div",xt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Phone Number","onUpdate:modelValue":s[7]||(s[7]=t=>a.value.phone=t)},null,512),[[g,a.value.phone]]),It,(ie=(re=(de=(ne=o(i))==null?void 0:ne.response)==null?void 0:de.data)==null?void 0:re.errors)!=null&&ie.phone?(d(),n("small",At,l((pe=(_e=(ue=(ce=o(i))==null?void 0:ce.response)==null?void 0:ue.data)==null?void 0:_e.errors)==null?void 0:pe.phone[0]),1)):m("",!0)])]),e("div",Ct,[o(Se)?(d(),n("button",{key:0,class:"primary-button",disabled:o(v).loading},Dt,8,St)):(d(),n("div",Pt,[Nt,e("button",{class:"secondary-button",onClick:s[8]||(s[8]=t=>h.value=!h.value)},"Close")]))])],32)])])):m("",!0)])]),e("div",Vt,[e("div",Tt,[e("div",Ut,[e("div",Bt,[e("div",Ft,[(d(!0),n(I,null,A(o(y).getCartItems,(t,f)=>{var b,k,x,fe,ge,me,ye,be,ke,we,xe,Ie;return d(),n("div",{class:"checkout__product-items__item",key:`cart-item-${f}`},[e("div",zt,[e("img",{src:`${r.$API_URL}/storage/uploads/${((b=t==null?void 0:t.selectSku)==null?void 0:b.image)??((x=(k=t==null?void 0:t.data)==null?void 0:k.images[0])==null?void 0:x.image)}`,style:{width:"70px",height:"auto"},alt:"Chair"},null,8,Lt),e("div",Mt,[e("p",null,l((fe=t==null?void 0:t.data)!=null&&fe.title&&((me=(ge=t==null?void 0:t.data)==null?void 0:ge.title)==null?void 0:me.length)>25?((be=(ye=t==null?void 0:t.data)==null?void 0:ye.title)==null?void 0:be.slice(0,15))+"...":(ke=t==null?void 0:t.data)==null?void 0:ke.title),1)])]),e("div",jt,[e("div",null,[e("p",null,"Qty: "+l((we=t.selectSku)==null?void 0:we.selectQty),1)]),e("div",null,l(((xe=t.selectSku)==null?void 0:xe.price)*((Ie=t.selectSku)==null?void 0:Ie.selectQty))+" ৳",1)])])}),128))]),e("div",null,[e("p",qt,[Ce(l(o(y).getCartLength)+" Items. Subtotal: ",1),e("span",Rt,l(o(y).getCartTotalPrice)+" ৳",1)])])])]),e("div",Ot,[e("div",Qt,[Et,e("ul",null,[e("li",null,[Yt,e("span",null,l(o(y).getCartTotalPrice)+" ৳",1)]),e("li",null,[Zt,e("span",null,l((he=p.value)==null?void 0:he.setDesiveryCharge)+" ৳",1)]),e("li",Gt,[Ht,e("strong",null,l(parseInt(o(y).getCartTotalPrice)+parseInt((ve=p.value)==null?void 0:ve.setDesiveryCharge))+" ৳",1)])]),e("button",{onClick:Ne,class:"primary-button text-center"},"Place Order")])])])])])])])}}};export{Wt as default};
